"use strict";window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)},function(){function t(t){this.x=Math.random()*m,this.y=Math.random()*w-w,this.r=i(10,30),this.d=Math.random()*g+10,this.color=t,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return u.beginPath(),u.lineWidth=this.r/2,u.strokeStyle=this.color,u.moveTo(this.x+this.tilt+this.r/4,this.y),u.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),u.stroke()}}function n(){I=!0,x=[],C=!1;for(var n=0;n<g;n++){var o=T.getColor();x.push(new t(o))}l()}function o(){u.clearRect(0,0,m,w);for(var t=[],n=0;n<g;n++)!function(n){t.push(x[n].draw())}(n);return e(),t}function i(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function e(){var t,n=0;y+=.01,A+=.1;for(var o=0;o<g;o++){if(t=x[o],C)return;!v&&t.y<-15?t.y=w+100:(a(t,o),t.y<=w&&n++,r(t,o))}0===n&&c()}function r(t,n){(t.x>m+20||t.x<-20||t.y>w)&&v&&(n%5>0||n%2==0?h(t,Math.random()*m,-10,Math.floor(10*Math.random())-20):Math.sin(y)>0?h(t,-20,Math.random()*w,Math.floor(10*Math.random())-20):h(t,m+20,Math.random()*w,Math.floor(10*Math.random())-20))}function a(t,n){t.tiltAngle+=t.tiltAngleIncremental,t.y+=(Math.cos(y+t.d)+3+t.r/2)/2,t.x+=Math.sin(y),t.tilt=15*Math.sin(t.tiltAngle-n/3)}function h(t,n,o,i){t.x=n,t.y=o,t.tilt=i}function l(){m=window.innerWidth,w=window.innerHeight,d.width=m,d.height=w,function t(){return C?null:(M=requestAnimFrame(t),o())}()}function s(){clearTimeout(f),clearTimeout(M)}function c(){C=!0,void 0!=u&&u.clearRect(0,0,m,w)}var d,u,m,w,f,M,g=150,x=[],y=0,A=0,I=!1,v=!0,C=!0,T={colorOptions:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return this.colorIncrementer>=10&&(this.colorIncrementer=0,this.colorIndex++,this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};window.readyConfetti=function(){d=document.getElementById("canvas"),u=d.getContext("2d"),m=window.innerWidth,w=window.innerHeight,d.width=m,d.height=w},window.stopConfetti=function(){v=!1,s()},window.startConfetti=function(){if(!I)return n();s(),c(),console.log("reactivationTimerHandler"),f=setTimeout(function(){v=!0,C=!1,n()},100)}}();
"use strict";function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function t(e){var n=t.modules[e];if(!n)throw new Error('failed to require "'+e+'"');return"exports"in n||"function"!=typeof n.definition||(n.client=n.component=!0,n.definition.call(this,n.exports={},n),delete n.definition),n.exports}t.loader="component",t.helper={},t.helper.semVerSort=function(t,e){for(var n=t.version.split("."),r=e.version.split("."),i=0;i<n.length;++i){var o=parseInt(n[i],10),s=parseInt(r[i],10);if(o!==s)return o>s?1:-1;var a=n[i].substr((""+o).length),u=r[i].substr((""+s).length);if(""===a&&""!==u)return 1;if(""!==a&&""===u)return-1;if(""!==a&&""!==u)return a>u?1:-1}return 0},t.latest=function(e,n){function r(t){throw new Error('failed to find latest module of "'+t+'"')}var i=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;/(.*)~(.*)/.test(e)||r(e);for(var o=Object.keys(t.modules),s=[],a=[],u=0;u<o.length;u++){var c=o[u];if(new RegExp(e+"@").test(c)){var p=c.substr(e.length+1);null!=i.exec(c)?s.push({version:p,name:c}):a.push({version:p,name:c})}}if(0===s.concat(a).length&&r(e),s.length>0){f=s.sort(t.helper.semVerSort).pop().name;return!0===n?f:t(f)}var f=a.sort(function(t,e){return t.name>e.name})[0].name;return!0===n?f:t(f)},t.modules={},t.register=function(e,n){t.modules[e]={definition:n}},t.define=function(e,n){t.modules[e]={exports:n}},t.register("component~transform-property@0.0.1",function(t,e){for(var n,r=["webkitTransform","MozTransform","msTransform","OTransform","transform"],i=document.createElement("p"),o=0;o<r.length;o++)if(n=r[o],null!=i.style[n]){e.exports=n;break}}),t.register("component~has-translate3d@0.0.3",function(e,n){var r=t("component~transform-property@0.0.1");if(r&&window.getComputedStyle){var i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},o=document.createElement("div");o.style[r]="translate3d(1px,1px,1px)",document.body.insertBefore(o,null);var s=getComputedStyle(o).getPropertyValue(i[r]);document.body.removeChild(o),n.exports=null!=s&&s.length&&"none"!=s}else n.exports=!1}),t.register("yields~has-transitions@1.0.0",function(t,e){function n(t,e){return!!t.transition||(e=window.getComputedStyle(t),!!parseFloat(e.transitionDuration,10))}e.exports=function(t){switch(arguments.length){case 0:return i;case 1:return i?n(t):i}};var r=document.body.style,i="transition"in r||"webkitTransition"in r||"MozTransition"in r||"msTransition"in r}),t.register("component~event@0.1.4",function(t,e){var n=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==n?"on":"";t.bind=function(t,e,r,o){return t[n](i+e,r,o||!1),r},t.unbind=function(t,e,n,o){return t[r](i+e,n,o||!1),n}}),t.register("ecarter~css-emitter@0.0.1",function(e,n){function r(t){if(!(this instanceof r))return new r(t);this.el=t}var i=t("component~event@0.1.4"),o=["transitionend","webkitTransitionEnd","oTransitionEnd","MSTransitionEnd","animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];n.exports=r,r.prototype.bind=function(t){for(var e=0;e<o.length;e++)i.bind(this.el,o[e],t);return this},r.prototype.unbind=function(t){for(var e=0;e<o.length;e++)i.unbind(this.el,o[e],t);return this},r.prototype.once=function(t){function e(){n.unbind(e),t.apply(n.el,arguments)}var n=this;return n.bind(e),this}}),t.register("component~once@0.0.1",function(t,e){var n=0,r=function(){return this}();e.exports=function(t){function e(){if(this==r){if(e.called)return;return e.called=!0,t.apply(this,arguments)}var n="__called_"+i+"__";if(!this[n])return this[n]=!0,t.apply(this,arguments)}var i=n++;return e}}),t.register("yields~after-transition@0.0.1",function(e,n){function r(t,e){return a&&i(t)?(o(t).bind(e),e):e()}var i=t("yields~has-transitions@1.0.0"),o=t("ecarter~css-emitter@0.0.1"),s=t("component~once@0.0.1"),a=i();n.exports=r,r.once=function(t,e){var n=s(e);r(t,e=function(){o(t).unbind(e),n()})}}),t.register("component~emitter@1.2.0",function(t,e){function n(t){if(t)return r(t)}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("yields~css-ease@0.0.1",function(t,e){var n;e.exports=(n={in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},_defineProperty(n,"ease-out-quad","cubic-bezier(0.455, 0.030, 0.515, 0.955)"),_defineProperty(n,"ease-out-cubic","cubic-bezier(0.645, 0.045, 0.355, 1.000)"),_defineProperty(n,"ease-in-out-quart","cubic-bezier(0.770, 0.000, 0.175, 1.000)"),_defineProperty(n,"ease-in-out-quint","cubic-bezier(0.860, 0.000, 0.070, 1.000)"),_defineProperty(n,"ease-in-out-sine","cubic-bezier(0.445, 0.050, 0.550, 0.950)"),_defineProperty(n,"ease-in-out-expo","cubic-bezier(1.000, 0.000, 0.000, 1.000)"),_defineProperty(n,"ease-in-out-circ","cubic-bezier(0.785, 0.135, 0.150, 0.860)"),_defineProperty(n,"ease-in-out-back","cubic-bezier(0.680, -0.550, 0.265, 1.550)"),n)}),t.register("component~query@0.0.3",function(t,e){function n(t,e){return e.querySelector(t)}(t=e.exports=function(t,e){return e=e||document,n(t,e)}).all=function(t,e){return(e=e||document).querySelectorAll(t)},t.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return n=e.one,t.all=e.all,t}}),t.register("move",function(e,n){function r(t){if(!(this instanceof r))return new r(t);if("string"==typeof t&&(t=o(t)),!t)throw new TypeError("Move must be initialized with element or selector");this.el=t,this._props={},this._rotate=0,this._transitionProps=[],this._transforms=[],this.duration(r.defaults.duration)}var i=t("component~emitter@1.2.0"),o=t("component~query@0.0.3"),s=t("yields~after-transition@0.0.1"),a=t("component~has-translate3d@0.0.3"),u=t("yields~css-ease@0.0.1"),c=a?["translate3d(",", 0)"]:["translate(",")"];n.exports=r;var p=window.getComputedStyle||window.currentStyle;r.version="0.5.0",r.ease=u,r.defaults={duration:500},r.select=function(t){return"string"!=typeof t?t:o(t)},i(r.prototype),r.prototype.transform=function(t){return this._transforms.push(t),this},r.prototype.skew=function(t,e){return this.transform("skew("+t+"deg, "+(e||0)+"deg)")},r.prototype.skewX=function(t){return this.transform("skewX("+t+"deg)")},r.prototype.skewY=function(t){return this.transform("skewY("+t+"deg)")},r.prototype.translate=r.prototype.to=function(t,e){return this.transform(c.join(t+"px, "+(e||0)+"px"))},r.prototype.translateX=r.prototype.x=function(t){return this.transform("translateX("+t+"px)")},r.prototype.translateY=r.prototype.y=function(t){return this.transform("translateY("+t+"px)")},r.prototype.scale=function(t,e){return this.transform("scale("+t+", "+(e||t)+")")},r.prototype.scaleX=function(t){return this.transform("scaleX("+t+")")},r.prototype.matrix=function(t,e,n,r,i,o){return this.transform("matrix("+[t,e,n,r,i,o].join(",")+")")},r.prototype.scaleY=function(t){return this.transform("scaleY("+t+")")},r.prototype.rotate=function(t){return this.transform("rotate("+t+"deg)")},r.prototype.ease=function(t){return t=u[t]||t||"ease",this.setVendorProperty("transition-timing-function",t)},r.prototype.animate=function(t,e){for(var n in e)e.hasOwnProperty(n)&&this.setVendorProperty("animation-"+n,e[n]);return this.setVendorProperty("animation-name",t)},r.prototype.duration=function(t){return t=this._duration="string"==typeof t?1e3*parseFloat(t):t,this.setVendorProperty("transition-duration",t+"ms")},r.prototype.delay=function(t){return t="string"==typeof t?1e3*parseFloat(t):t,this.setVendorProperty("transition-delay",t+"ms")},r.prototype.setProperty=function(t,e){return this._props[t]=e,this},r.prototype.setVendorProperty=function(t,e){return this.setProperty("-webkit-"+t,e),this.setProperty("-moz-"+t,e),this.setProperty("-ms-"+t,e),this.setProperty("-o-"+t,e),this},r.prototype.set=function(t,e){return this.transition(t),this._props[t]=e,this},r.prototype.add=function(t,e){if(p){var n=this;return this.on("start",function(){var r=parseInt(n.current(t),10);n.set(t,r+e+"px")})}},r.prototype.sub=function(t,e){if(p){var n=this;return this.on("start",function(){var r=parseInt(n.current(t),10);n.set(t,r-e+"px")})}},r.prototype.current=function(t){return p(this.el).getPropertyValue(t)},r.prototype.transition=function(t){return this._transitionProps.indexOf(t)?(this._transitionProps.push(t),this):this},r.prototype.applyProperties=function(){for(var t in this._props)this.el.style.setProperty(t,this._props[t],"");return this},r.prototype.move=r.prototype.select=function(t){return this.el=r.select(t),this},r.prototype.then=function(t){if(t instanceof r)this.on("end",function(){t.end()});else{if("function"!=typeof t){var e=new r(this.el);return e._transforms=this._transforms.slice(0),this.then(e),e.parent=this,e}this.on("end",t)}return this},r.prototype.pop=function(){return this.parent},r.prototype.reset=function(){return this.el.style.webkitTransitionDuration=this.el.style.mozTransitionDuration=this.el.style.msTransitionDuration=this.el.style.oTransitionDuration="",this},r.prototype.end=function(t){var e=this;return this.emit("start"),this._transforms.length&&this.setVendorProperty("transform",this._transforms.join(" ")),this.setVendorProperty("transition-properties",this._transitionProps.join(", ")),this.applyProperties(),t&&this.then(t),s.once(this.el,function(){e.reset(),e.emit("end")}),this}}),"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t("move"):"function"==typeof define&&define.amd?define("move",[],function(){return t("move")}):(this||window).move=t("move")}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t,e,o={},n={timeout:null,once:!1,title:"name",subtitle:null,api:null,confetti:!0,showbtn:!0,el:"body",fitsize:!0,speed:350,data:{},winners:[],winnerList:[],winnerHistory:[],number:1,_round:0,$el:null},r={},i="<i class='dh-icon dh-icon-dice'>ðŸŽ²<svg><use xlink:href='#dh-dice'/></svg></i>",l=function(e){var n=$("      <svg xmlns='http://www.w3.org/2000/svg' style='display: none;'>        <symbol id='dh-okay' viewBox='0 0 57 92'>          <path fill='currentColor' fill-rule='nonzero' d='M3.6 51c2.5-1 5.2.3 6.2 2.7 1.3 3.5 4.6 5.8 8.3 5.8 5 0 9.2-4 9.2-9s-4-9-9-9c-3.8 0-7 2.2-8.4 5.6C8.8 49.7 6 51 3.6 50c-2.4-1-3.6-3.7-2.6-6C3.8 36.4 10.5 32 18 32c3.5 0 6.7 1 9.5 2.5l-8.8-22c-1-2.5.3-5.2 2.7-6.2 2.4-1 5.2.3 6 2.7L37 32.4 33.4 6.2c-.3-2.5 1.5-5 4-5.3 2.7-.4 5 1.4 5.4 4L46 29.7l1-11c.2-2.7 2.5-4.7 5-4.4 2.7.2 4.7 2.5 4.4 5l-3.6 41-4 30.8h-29l4.8-23.3c-2 .8-4.2 1.2-6.5 1.2C10.6 69 4 64.2 1 57c-1-2.4.2-5.2 2.6-6z'/>        </symbol>        <symbol id='dh-crown' viewBox='0 0 88 81'>          <path fill='currentColor' fill-rule='nonzero' d='M83 23c-2.6 0-4.8 2.3-4.8 5 0 1.6.8 3 2 4L69.6 48.2l-4-27.8c2.5-.3 4.3-2.3 4.3-4.7 0-2.7-2.2-4.8-4.8-4.8-2.7 0-4.8 2-4.8 4.8 0 2 1.3 3.8 3 4.4l-8 22-9.8-32c2-.6 3.4-2.4 3.4-4.6C48.8 3 46.6.8 44 .8c-2.6 0-4.8 2.2-4.8 4.8 0 2.2 1.4 4 3.4 4.6l-9.8 32-8-22c1.8-.6 3-2.4 3-4.4 0-2.7-2-4.8-4.7-4.8-2.6 0-4.7 2-4.7 4.8 0 2.4 1.8 4.3 4 4.7l-3.8 27.8-11-16.5c1.4-.8 2.3-2.3 2.3-4C9.8 25.2 7.6 23 5 23 2.4 23 .2 25.2.2 27.8c0 2.7 2.2 4.8 4.8 4.8.4 0 .8 0 1.2-.2l9.7 41s18.6-1.6 28-1.6c9.4 0 28 1.6 28 1.6L82 32.6H83c2.6 0 4.8-2 4.8-4.7s-2.2-5-4.8-5zM26 62.7c-2 0-3.6-1.6-3.6-3.5 0-2 1.6-3.5 3.6-3.5s3.6 1.6 3.6 3.6-1.6 3.6-3.6 3.6zm18 2.2c-3.2 0-5.8-2.5-5.8-5.7 0-3 2.6-5.7 5.8-5.7 3.2 0 5.8 2.6 5.8 5.8 0 3.3-2.6 5.8-5.8 5.8zm18-2.2c-2 0-3.6-1.6-3.6-3.5 0-2 1.6-3.5 3.6-3.5s3.6 1.6 3.6 3.6-1.6 3.6-3.6 3.6z'/>        </symbol>        <symbol id='dh-dice' viewBox='0 0 90 76'>          <path fill='currentColor' fill-rule='nonzero' d='M83.6 34.5c-1-.4-2.2 0-2.6 1-.4 1 0 2.3 1 2.7 4.4 1.7 4 3.2 3.6 4-.5 1.8-5.8 4-12.7 5.3l8.7-15.2c1.7-3 .7-6.7-2.3-8.4L39.7 1c-3-1.8-6.7-.7-8.5 2.2L10.8 38.6c-4.4-1.4-6.6-3-6.6-4 0-2 2.6-4.3 9.8-6 1-.2 1.8-1.3 1.6-2.4-.3-1-1.4-1.8-2.4-1.5C1.8 27.3.2 32 .2 34.5c0 7 14 9.5 21.7 10.4 0-.2 0-.3-.2-.5-.8-3 1-6 4-6.7 2.8-.8 5.8 1 6.6 4 .8 2.8-1 5.8-4 6.6-2 .6-4.3-.3-5.6-2-.5.5-1 .8-1.8.7-5.4-.4-9.8-1.3-13.3-2.4-.6 2.6.5 5.4 3 6.8l38.8 22.4s2.4 1.6 4.2 1.6c1.8 0 3.4-1.6 3.4-1.6.8-.4 1.3-1 1.7-1.8l10-17.2-6.3.3c-1 0-2-.6-2-1.5-.2-.2-.2-.4-.2-.6 9-.3 27-2.8 29.3-9.5 1-2.7.6-6.5-6-9zm-48-13.7c-1-3 1-6 3.8-6.7 3-.7 6 1 6.7 4 1 3-1 6-3.8 6.7-3 .7-6-1-6.7-4zm15 40.3c-3 1-6-.8-6.7-3.7-1-3 1-6 3.8-6.7 3-.8 6 1 6.7 3.8.8 3-1 6-4 6.7zm13.7-23.6c-3 .8-6-1-6.7-4-.8-2.8 1-5.8 4-6.6 2.8-.7 5.8 1 6.6 4 .8 2.8-1 5.8-4 6.6z'/>        </symbol>        <symbol id='dh-save' viewBox='-4 -4 32 32'>          <path fill='currentColor' fill-rule='nonzero' d='M19 11h-14v-2h14v2zm0 2h-14v2h14v-2zm0 4h-14v2h14v-2zm3-11v16h-20v-16h20zm2-6h-24v24h24v-24z'/>        </symbol>      </svg>    "),r=navigator.platform&&(navigator.platform.toLowerCase().indexOf("mac")>=0||/iPad|iPhone|iPod/.test(navigator.platform));t=$("      <div class='dh-lottery"+(r?" is-mac":"")+"'></div>    ");var l=$("      <div id='dh-lottery-selector' style='display: none'>      </div>    "),s=$("      <div class='main-container'>        <canvas id='canvas'></canvas>        <div class='userlist columns is-multiline is-mobile'></div>      </div>    "),a=$("      <div class='actions'>        <a class='button primary' id='dh-history-show'><i class='dh-icon dh-icon-dice'>ðŸ’¾<svg><use xlink:href='#dh-save'/></svg></i></a>        <a class='button primary' id='dh-lottery-go'>"+i+"</a>      </div>    "),d=$("      <div class='dh-modal"+(r?" is-mac":"")+"' id='dh-lottery-winner'>        <div class='dh-modal-background'></div>        <div class='dh-modal-content'>        </div>        <button class='dh-modal-close'></button>      </div>    "),c=$("      <div class='dh-modal' id='dh-lottery-history'>        <div class='dh-modal-background'></div>        <div class='dh-modal-content'>        </div>        <button class='dh-modal-close'></button>        <button class='dh-history-clean dh-modal-btn'>Clean all</button>        <div class='dh-modal-config-number' >        <button class='dh-number-inc dh-modal-btn'>+</button>        <div class='dh-number dh-modal-btn'>1</div>        <button class='dh-number-dec dh-modal-btn'>-</button>        </div>      </div>    ");t.append(n),t.append(l),t.append(s),t.append(c),o.showbtn&&t.append(a),e.append(t),e.append(d),$("#dh-lottery-go").click(function(){return f?L():z()}),$("#dh-lottery-winner .dh-modal-close").click(function(){return $("#dh-lottery-winner").removeClass("is-active")}),$("#dh-lottery-history .dh-modal-close").click(function(){return $("#dh-lottery-history").removeClass("is-active")}),$("#dh-lottery-history .dh-history-clean").click(function(){k()}),$("#dh-lottery-history .dh-number-inc").click(function(){o.number<10&&(o.number+=1,localStorage.setItem("lotteryConfigNumber",o.number),$("#dh-lottery-history .dh-number").text(o.number))}),$("#dh-lottery-history .dh-number").click(function(){o.number=1,localStorage.setItem("lotteryConfigNumber",o.number),$("#dh-lottery-history .dh-number").text(o.number)}),$("#dh-lottery-history .dh-number-dec").click(function(){o.number>1&&(o.number-=1,localStorage.setItem("lotteryConfigNumber",o.number),$("#dh-lottery-history .dh-number").text(o.number))}),$("#dh-history-show").click(function(){S(),$("#dh-lottery-history .dh-number").text(o.number)}),document.body.onkeydown=function(t){if(27==t.keyCode)return $(".dh-modal-close").click();if(32==t.keyCode){if($("#dh-lottery-winner").hasClass("is-active"))return;return $("#dh-lottery-go").click()}}},s=function(){for(var t="",n=0;n<o.number;n++)t+="        <span class='image' id='selector_"+n+"'>          <div class='selector-border'></div>        </span>      ";$("#dh-lottery-selector").html(t),setTimeout(function(){y=g(),$("#dh-lottery-selector .image").show();for(var t=0;t<o.number;t++)C(t,0)},1e3),o.fitsize&&m(e)},a=function(t,e){var o={name:function(t){return t}};return e.replace(/{(\w+)}/g,function(e,n){return n?o&&o[n]?o[n](t[n]):t[n]:""})},d=function(t){t.json=encodeURIComponent(JSON.stringify(t));var e=a(t,"      <div class='column'>        <div class='profile' data-profile='{json}'>            <div class='profile__parent'>                <div class='profile__wrapper'>                    <div class='profile__content'>                        <div class='avatar'><span class='image avatar-image is-128x128'><img src='{avatar}' alt='avatar'/></span></div>                    </div>                </div>            </div>        </div>      </div>    ");return $(".userlist").append(e)},c=function(){$.ajax({type:"GET",url:o.api,dataType:"json",success:function(t){o.data=t,console.log("Lottery: API data loaded"),h()},error:function(t,e){alert("Lottery: Load player list error!\n"+e+"\n"+e)}})},h=function(){o.$el=$(o.el),localStorage.getItem("lotteryHistory")&&(o.winnerHistory=JSON.parse(localStorage.getItem("lotteryHistory"))),l(o.$el),$.each(o.data,function(t,e){e.id=t,d(e)}),console.log("Lottery: "+o.data.length+" player"),o.fitsize&&u(),o.confetti&&window.readyConfetti()},u=function(){var n=o.$el.height()*o.$el.width(),r=o.data.length;for(e=Math.round(Math.sqrt(n/r)/1.2),m(e);!(o.$el.height()>=t.height()&&o.$el.width()>=t.width()||e<10);)m(e-=2);g()},m=function(t){$(".dh-lottery .avatar .image").css("height",t+"px"),$(".dh-lottery .avatar .image").css("width",t+"px"),$("#dh-lottery-selector .image").css("height",t+"px"),$("#dh-lottery-selector .image").css("width",t+"px")},y=[],v=[],f=null,p=null;$(window).resize(function(){y=g();for(var t in v)C(t,v[t]);o.fitsize&&u()});var g=function(){return $.map($(".profile"),function(t,e){return r[e]=t,$(t).find(".avatar-image").first().position()})},b=function(t){var e=0;for(var o in t)e++;return e},w=function(t){var e,n,r,i=$("      <div class='profile-item'>        <div class='avatar-image'>          <h1><i class='dh-icon dh-icon-crown'>ðŸ‘‘<svg><use xlink:href='#dh-crown'/></svg></i></h1>          <img class='avatar' src='' alt='avatar' />        </div>        <h2 class='profile-name'></h2>        <h3 class='profile-subtitle'></h3>        <h4 class='profile-desc'></h4>      </div>    ");t&&(i.find(".avatar").attr("src",t.avatar),t.data&&Object.keys(t.data).length>0&&(n=t.data[o.title],e=t.data[o.subtitle],r=t.data[o.desc]),i.find(".profile-name").text(n||t.name),i.find(".profile-subtitle").text(e||t.company),i.find(".profile-desc").text(r||"")),$("#dh-lottery-winner .dh-modal-content").append(i)},C=function(t,e){if($(r[e]).addClass("current"),y[e])return move("#dh-lottery-selector #selector_"+t).x(y[e].left-4).y(y[e].top-4).ease("in-out").duration(200).end(),v},x=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!(y<=0)){var n=Math.floor(Math.random()*y.length);if(o.once&&o.winnerList[n]||$.inArray(n,v)>=0)return console.log("Lottery: dup, next."),t(e),!1;C(e,n),v.push(n)}},z=function(){return s(),o.once&&o.data.length-b(o.winnerList)<o.number?(alert("No user left to participate in lottery."),!1):(console.log("Lottery: started"),o.$el.addClass("running-lottery"),$("#dh-lottery-winner").removeClass("is-active"),$("#dh-lottery-selector").show(),f=setInterval(function(){v=[],$(".dh-lottery .profile.current").removeClass("current");for(var t=0;t<o.number;t++)x(t);console.log("Lottery: moveToTarget #",v)},o.speed),o.timeout&&(p=setTimeout(L,1e3*o.timeout)),$("#dh-lottery-go").removeClass("primary").addClass("success").html("<i class='dh-icon dh-icon-okay'>ðŸ‘Œ<svg><use xlink:href='#dh-okay'/></svg></i>"),!0)},L=function(){o.$el.removeClass("running-lottery"),console.log("Lottery: stoping..."),clearTimeout(p),$("#dh-lottery-winner .dh-modal-content").html(""),o.winners=[];for(var t=0;t<v.length;t++){var e=JSON.parse(decodeURIComponent($($(".profile")[v[t]]).data("profile"))),n=e.id;o.winners[n]=e,o.winnerList[n]=e,w(e)}$("#dh-lottery-winner .dh-modal-content").removeClass("dh-morewinner"),$(".dh-modal-content .profile-item").css("font-size","50px"),v.length>4&&$("#dh-lottery-winner .dh-modal-content").addClass("dh-morewinner"),v.length<4&&$(".dh-modal-content .profile-item").css("font-size","70px"),v.length<2&&$(".dh-modal-content .profile-item").css("font-size","90px"),clearInterval(f),console.log("Lottery: Ignore user #",o.winnerList),o.confetti&&(window.startConfetti(),setTimeout(function(){return window.stopConfetti()},1500)),setTimeout(function(){return $("#dh-lottery-winner").addClass("is-active")},700),f=null,$("#dh-lottery-go").removeClass("success").addClass("primary").html(i);var r={};r.time=(new Date).toLocaleString(),r.winner={};for(var l in o.winners)r.winner[l]=o.winners[l];return o.winnerHistory.push(r),localStorage.setItem("lotteryHistory",JSON.stringify(o.winnerHistory)),e},k=function(){return 1==confirm("Delete Lottery History. Sure?")&&(localStorage.setItem("lotteryHistory",""),o.winnerHistory=[],$("#dh-lottery-history .dh-modal-content").html(""),!0)},S=function(){var t=$("#dh-lottery-history .dh-modal-content");t.html("");var e=o.winnerHistory.reverse();for(var n in e){(l=e[n]).number=b(l.winner),l.i=Number(n)+1;var r=$(a(l,"      <div class='dh-history-item'>        <div class='dh-history-info'>          <h1>{i}</h1>          <p>{time}</p>        </div>        <div class='dh-history-user'>        </div>      </div>    "));for(var i in l.winner){var l=e[n].winner[i],s=$(a(l,"      <div>          <img class='avatar' src='{avatar}'>          <h3 class='name'>{name}</h3>      </div>    "));r.find(".dh-history-user").append(s)}t.append(r)}return $("#dh-lottery-history").addClass("is-active"),o.winnerHistory},H={init:function(t){null!=(o=$.extend({},n,t)).api?c(o.api):h(),!t.number&&localStorage.lotteryConfigNumber&&(o.number=parseInt(localStorage.lotteryConfigNumber)||1)},start:function(){return z()},stop:function(){return L()},getUsers:function(){return o.data},winners:function(t){switch(t){case"get":return o.winners;case"clean":return o.winnerList=[],!0;default:console.error("Action "+t+" does not exist.")}},history:function(t){switch(t){case"show":return S();case"get":return o.winnerHistory;case"clean":return k();default:console.error("Action "+t+" does not exist.")}}};$.lottery=function(t){return H[t]?H[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===t?"undefined":_typeof(t))&&t?void console.error("Method "+t+" does not exist."):H.init.apply(this,arguments)}}();